document.addEventListener("DOMContentLoaded",()=>{const o=[{id:"krasniy-zeleniy",name:"\u041A\u0440\u0430\u0441\u043D\u044B\u0439 \u2014 \u0437\u0435\u043B\u0451\u043D\u044B\u0439",path:"games/krasniy-zeleniy/",initFunction:"initKrasniyZeleniy"},{id:"naydi-paru",name:"\u041D\u0430\u0439\u0434\u0438 \u043F\u043E\u0445\u043E\u0436\u0443\u044E \u043F\u0430\u0440\u0443",path:"games/naydi-paru/",initFunction:"initNaydiParu"},{id:"sosedi",name:"\u0421\u043E\u0441\u0435\u0434\u0438",path:"games/sosedi/",initFunction:"initSosedi"},{id:"druzya",name:"\u0414\u0440\u0443\u0437\u044C\u044F",path:"games/druzya/",initFunction:"initDruzya"},{id:"chetvertiy-lishniy",name:"\u0427\u0435\u0442\u0432\u0451\u0440\u0442\u044B\u0439 \u043B\u0438\u0448\u043D\u0438\u0439",path:"games/chetvertiy-lishniy/",initFunction:"initChetvertiyLishniy"},{id:"naydi-mesto",name:"\u041D\u0430\u0439\u0434\u0438 \u043C\u0435\u0441\u0442\u043E \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0435",path:"games/naydi-mesto/",initFunction:"initNaydiMesto"},{id:"samiy-vnimatelniy",name:"\u0421\u0430\u043C\u044B\u0439 \u0432\u043D\u0438\u043C\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439",path:"games/samiy-vnimatelniy/",initFunction:"initSamiyVnimatelniy"},{id:"ugaday-imya",name:"\u0423\u0433\u0430\u0434\u0430\u0439 \u0438\u043C\u044F",path:"games/ugaday-imya/",initFunction:"initUgadaiImya"},{id:"privetstvie",name:"\u041F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435",path:"games/privetstvie/",initFunction:"initPrivetstvie"},{id:"robot",name:"\u0420\u043E\u0431\u043E\u0442",path:"games/robot/",initFunction:"initRobot"},{id:"naydi-zvuk",name:"\u041D\u0430\u0439\u0434\u0438 \u0437\u0432\u0443\u043A",path:"games/naydi-zvuk/",initFunction:"initNaydiZvuk"},{id:"soberi-gribi",name:"\u0421\u043E\u0431\u0435\u0440\u0438 \u0433\u0440\u0438\u0431\u044B",path:"games/soberi-gribi/",initFunction:"initSoberiGribi"},{id:"uborka",name:"\u0423\u0431\u043E\u0440\u043A\u0430",path:"games/uborka/",initFunction:"initUborka"},{id:"gde-zvuk",name:"\u0413\u0434\u0435 \u0437\u0432\u0443\u043A?",path:"games/gde-zvuk/",initFunction:"initGdeZvuk"},{id:"poschitay",name:"\u041F\u043E\u0441\u0447\u0438\u0442\u0430\u0439",path:"games/poschitay/",initFunction:"initPoschitay"},{id:"spoy-pesenku",name:"\u0421\u043F\u043E\u0439 \u043F\u0435\u0441\u0435\u043D\u043A\u0443",path:"games/spoy-pesenku/",initFunction:"initSpoyPesenku"}],s=document.getElementById("games-menu"),a=document.getElementById("game-container"),d=document.getElementById("game-specific-styles"),u=document.getElementById("home-link");function y(){const e=document.createElement("ul");o.forEach(n=>{const i=document.createElement("li"),t=document.createElement("button");t.textContent=n.name,t.dataset.gameId=n.id,i.appendChild(t),e.appendChild(i)}),s.innerHTML="",s.appendChild(e)}async function c(e){const n=o.find(i=>i.id===e);if(!n){console.error(`\u0418\u0433\u0440\u0430 \u0441 ID "${e}" \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430.`);return}a.innerHTML='<div class="loader">\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...</div>',d.innerHTML="";try{const[i,t,r]=await Promise.all([fetch(`${n.path}index.html`),fetch(`${n.path}style.css`),fetch(`${n.path}script.js`)]);if(!i.ok)throw new Error(`\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D \u0444\u0430\u0439\u043B: ${i.url}`);if(!t.ok)throw new Error(`\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D \u0444\u0430\u0439\u043B: ${t.url}`);if(!r.ok)throw new Error(`\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D \u0444\u0430\u0439\u043B: ${r.url}`);const[p,g,v]=await Promise.all([i.text(),t.text(),r.text()]);a.classList.remove("home"),a.innerHTML=p,d.innerHTML=g;const m=document.createElement("script");if(m.textContent=v,document.body.appendChild(m),typeof window[n.initFunction]=="function")window[n.initFunction]();else throw new Error(`\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 "${n.initFunction}" \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430.`);document.body.removeChild(m)}catch(i){console.error(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0438\u0433\u0440\u044B "${n.name}":`,i),a.innerHTML='<div class="error-message">\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0433\u0440\u0443. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043A\u043E\u043D\u0441\u043E\u043B\u044C \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0430 (F12) \u0434\u043B\u044F \u0434\u0435\u0442\u0430\u043B\u0435\u0439.</div>'}}function l(){const e=o.map(i=>`
          <div class="home-card card" data-game-id="${i.id}">
            <div class="home-emoji">${i.emoji||"\u{1F3AE}"}</div>
            <div class="home-title">${i.name}</div>
          </div>`).join("");a.innerHTML=`<div class="grid home-grid">${e}</div>`,d.innerHTML="",a.classList.add("home"),a.querySelector(".home-grid").addEventListener("click",i=>{const t=i.target.closest(".home-card");t&&c(t.dataset.gameId)})}s.addEventListener("click",e=>{e.target.tagName==="BUTTON"&&c(e.target.dataset.gameId)}),u.addEventListener("click",e=>{e.preventDefault(),l()});const h={"krasniy-zeleniy":"\u{1F34F}","naydi-paru":"\u{1F9E9}",sosedi:"\u{1F3E0}",druzya:"\u{1F467}\u{1F466}","chetvertiy-lishniy":"4\uFE0F\u20E3","naydi-mesto":"\u{1F9ED}","samiy-vnimatelniy":"\u{1F9E0}","ugaday-imya":"\u{1F47D}",privetstvie:"\u{1F44B}",robot:"\u{1F916}","naydi-zvuk":"\u{1F50E}","soberi-gribi":"\u{1F344}",uborka:"\u{1F9FA}","gde-zvuk":"\u{1F682}",poschitay:"\u{1F522}","spoy-pesenku":"\u{1F3B5}"};o.forEach(e=>e.emoji=h[e.id]||"\u{1F3AE}"),y()});
