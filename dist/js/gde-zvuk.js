const{speak,shuffle,setFeedback,updateProgress,wait,initSpeechWarmup}=window.GameUtils,targetLetter=document.getElementById("target-letter"),currentWordEl=document.getElementById("current-word"),playButton=document.getElementById("play-word"),startButton=document.getElementById("btn-start"),endButton=document.getElementById("btn-end"),feedback=document.getElementById("feedback"),progress=document.getElementById("progress");initSpeechWarmup();const dataset=shuffle([{sound:"\u0410",word:"\u0430\u0438\u0441\u0442"},{sound:"\u0410",word:"\u0440\u0443\u043A\u0430"},{sound:"\u041E",word:"\u043E\u0441\u044B"},{sound:"\u041E",word:"\u043E\u0441\u043B\u0438\u043A"},{sound:"\u0423",word:"\u0443\u0442\u043A\u0430"},{sound:"\u0423",word:"\u0443\u043B\u0435\u0439"},{sound:"\u0418",word:"\u0438\u0432\u0430"},{sound:"\u0418",word:"\u043F\u043D\u0438"},{sound:"\u041C",word:"\u0434\u043E\u043C"},{sound:"\u041C",word:"\u043C\u0430\u043A"},{sound:"\u0411",word:"\u0431\u044B\u043A"},{sound:"\u0411",word:"\u0431\u0430\u043A"},{sound:"\u0422",word:"\u043A\u043E\u0442"},{sound:"\u0422",word:"\u0440\u043E\u0442"},{sound:"\u0414",word:"\u0434\u0443\u0431"},{sound:"\u0414",word:"\u0434\u043E\u043C"},{sound:"\u041A",word:"\u0431\u044B\u043A"},{sound:"\u041A",word:"\u0440\u0430\u043A"},{sound:"\u0413",word:"\u0433\u0443\u0441\u044C"},{sound:"\u0413",word:"\u0433\u043E\u043B"},{sound:"\u041F",word:"\u043F\u0430\u0440"},{sound:"\u041F",word:"\u0441\u0443\u043F"},{sound:"\u0412",word:"\u0432\u043E\u043B\u043A"},{sound:"\u0412",word:"\u0432\u043E\u0441\u043A"},{sound:"\u0416",word:"\u0436\u0443\u043A"},{sound:"\u0416",word:"\u0436\u0430\u0440"},{sound:"\u0417",word:"\u0437\u0443\u0431"},{sound:"\u0417",word:"\u0437\u043E\u043D\u0442"},{sound:"\u041D",word:"\u043D\u043E\u0441"},{sound:"\u041D",word:"\u0441\u043E\u043D"},{sound:"\u0420",word:"\u0440\u0430\u043A"},{sound:"\u0420",word:"\u043F\u0430\u0440"},{sound:"\u0428",word:"\u0448\u0430\u0440"},{sound:"\u0428",word:"\u0448\u0443\u043C"},{sound:"\u0427",word:"\u0447\u0430\u0439"},{sound:"\u0427",word:"\u043C\u044F\u0447"}]);let currentIndex=0,score=0;function showRound(){if(currentIndex>=dataset.length){finishGame();return}const{sound:o,word:t}=dataset[currentIndex];targetLetter.textContent=o,currentWordEl.textContent=t.charAt(0).toUpperCase()+t.slice(1),updateProgress(progress,currentIndex+1,dataset.length),setFeedback(feedback,"\u0413\u0434\u0435 \u0441\u043B\u044B\u0448\u0438\u0442\u0441\u044F \u0437\u0432\u0443\u043A? \u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043A\u043D\u043E\u043F\u043A\u0443 \u0432 \u043D\u0430\u0447\u0430\u043B\u0435 \u0438\u043B\u0438 \u0432 \u043A\u043E\u043D\u0446\u0435 \u0441\u043B\u043E\u0432\u0430.","info"),playWord()}function determinePosition(o,t){const e=o.toLowerCase(),d=t.toLowerCase(),n=d.startsWith(e),s=d.endsWith(e);return n&&!s?"start":!n&&s?"end":n&&s||n?"start":"end"}async function handleAnswer(o){const{sound:t,word:e}=dataset[currentIndex],d=determinePosition(t,e);o===d?(score+=1,setFeedback(feedback,"\u041E\u0442\u043B\u0438\u0447\u043D\u043E! \u0412\u044B \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u043B\u0438 \u043C\u0435\u0441\u0442\u043E \u0437\u0432\u0443\u043A\u0430.","success"),currentIndex+=1,await wait(1200),showRound()):setFeedback(feedback,"\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0441\u043D\u043E\u0432\u0430. \u0413\u0434\u0435 \u0437\u0432\u0443\u0447\u0438\u0442 \u044D\u0442\u043E\u0442 \u0437\u0432\u0443\u043A?","error")}function playWord(){const{word:o}=dataset[currentIndex];speak(o,{rate:1.05})}function finishGame(){setFeedback(feedback,`\u0417\u0430\u0434\u0430\u0447\u0430 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0430! \u0412\u0435\u0440\u043D\u044B\u0445 \u043E\u0442\u0432\u0435\u0442\u043E\u0432: ${score} \u0438\u0437 ${dataset.length}.`,"success"),updateProgress(progress,dataset.length,dataset.length),playButton.textContent="\u{1F501} \u0421\u044B\u0433\u0440\u0430\u0442\u044C \u0441\u043D\u043E\u0432\u0430"}startButton.addEventListener("click",()=>handleAnswer("start")),endButton.addEventListener("click",()=>handleAnswer("end")),playButton.addEventListener("click",()=>{currentIndex>=dataset.length?restartGame():playWord()});function restartGame(){currentIndex=0,score=0;const o=shuffle(dataset);dataset.splice(0,dataset.length,...o),playButton.textContent="\u25B6\uFE0F \u041F\u0440\u043E\u0438\u0433\u0440\u0430\u0442\u044C \u0441\u043B\u043E\u0432\u043E",showRound()}showRound();
