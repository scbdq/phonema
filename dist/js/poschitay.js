const{speak,shuffle,setFeedback,updateProgress,wait,initSpeechWarmup}=window.GameUtils,wordEl=document.getElementById("count-word"),playButton=document.getElementById("play-count-word"),numbersRow=document.getElementById("numbers-row"),feedback=document.getElementById("feedback"),progress=document.getElementById("progress");initSpeechWarmup();const words=shuffle([{word:"\u0440\u0430\u043A",count:3},{word:"\u0440\u0443\u043A\u0430",count:4},{word:"\u0441\u043E\u043D",count:3},{word:"\u0441\u0443\u043F",count:3},{word:"\u043C\u0443\u0445\u0430",count:4},{word:"\u0440\u044B\u0431\u0430",count:4},{word:"\u043B\u0443\u043A",count:3},{word:"\u0432\u0430\u0437\u0430",count:4},{word:"\u0434\u043E\u043C",count:3},{word:"\u043B\u0443\u0436\u0430",count:4}]);let currentIndex=0,score=0;function buildNumberButtons(){numbersRow.innerHTML="";for(let t=1;t<=5;t+=1){const e=document.createElement("button");e.type="button",e.className="btn btn-secondary",e.textContent=String(t),e.addEventListener("click",()=>handleAnswer(t)),numbersRow.appendChild(e)}}function showRound(){if(currentIndex>=words.length){finishGame();return}const{word:t}=words[currentIndex];wordEl.textContent=t.charAt(0).toUpperCase()+t.slice(1),updateProgress(progress,currentIndex+1,words.length),setFeedback(feedback,"\u041F\u043E\u0441\u043B\u0443\u0448\u0430\u0439\u0442\u0435 \u0441\u043B\u043E\u0432\u043E \u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0438\u0441\u043B\u043E \u0437\u0432\u0443\u043A\u043E\u0432.","info"),speakWord()}function speakWord(){const{word:t}=words[currentIndex];speak(t,{rate:1.05})}async function handleAnswer(t){const{count:e}=words[currentIndex];t===e?(score+=1,setFeedback(feedback,"\u0412\u0435\u0440\u043D\u043E! \u0417\u0432\u0443\u043A\u043E\u0432 \u0438\u043C\u0435\u043D\u043D\u043E \u0441\u0442\u043E\u043B\u044C\u043A\u043E.","success"),currentIndex+=1,await wait(1200),showRound()):setFeedback(feedback,"\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437 \u2013 \u043F\u0435\u0440\u0435\u0441\u043B\u0443\u0448\u0430\u0439\u0442\u0435 \u0441\u043B\u043E\u0432\u043E.","error")}function finishGame(){setFeedback(feedback,`\u041E\u0442\u043B\u0438\u0447\u043D\u043E! \u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0445 \u043E\u0442\u0432\u0435\u0442\u043E\u0432: ${score} \u0438\u0437 ${words.length}.`,"success"),updateProgress(progress,words.length,words.length)}playButton.addEventListener("click",speakWord),buildNumberButtons(),showRound();
